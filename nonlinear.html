<!doctype>
<html>
<head>
	<title>Nonlinear!</title>
	<link rel="stylesheet" href="css/index.css">
	<link rel="stylesheet" href="joy/joy.css">
</head>
<body>
	<div id="container">
		<div id="player"></div>
		<div id="editor"></div>
	</div>
</div>

<script src="joy/-helpers.js"></script>
<script src="joy/watch.min.js"></script>
<script src="joy/lz-string.min.js"></script>
<script src="joy/Joy.js"></script>
<script src="joy/joy-ui.js"></script>
<script src="joy/joy-actors-ui.js"></script>
<script src="joy/joy-actors-math.js"></script>
<script src="joy/joy-actors-logic.js"></script>
<script src="joy/joy-actors-actions.js"></script>
<script src="joy/joy-modal.js"></script>

<script>
window.onload = function(){

	// Joy
	window.joy = new Joy({
		dom: "#editor",
		data: {},
		widget: ""+
			"Start with: {data:'start', type:'actions'}"+
			"For {data:'iterations', type:'number'} days, do: {data:'iterate', type:'actions', resetVariables:false}",
		onchange: function(data){

			var obj = {};
			Joy.act(data, data.start, obj);

			var iterations = data.iterations.value;
			for(var i=0; i<iterations; i++){
				Joy.act(data, data.iterate, obj);
			}

			console.log(JSON.stringify(obj,null,4));

		}
	});	

};
</script>